@using System.Globalization
@inject NavigationManager Navigation

<MudItem>
	<MudSelect Dense="true"
			   T="CultureInfo"
			   Variant="Variant.Outlined"
			   @bind-Value="Culture"
			   Style="width:10rem">

		@foreach (var culture in supportedCultures)
		{
			<MudSelectItem Value="@(culture)" />
		}

	</MudSelect>
</MudItem>

@code
{
	private CultureInfo[] supportedCultures = new[]
	{
		new CultureInfo("en"),
		new CultureInfo("fa"),
	};

	private CultureInfo Culture
	{
		get => CultureInfo.CurrentCulture;
		set
		{
			if (CultureInfo.CurrentCulture != value)
			{
				var js = (IJSInProcessRuntime)JS;
				js.InvokeVoid("blazorCulture.set", value.Name);

				Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
			}
		}
	}
}